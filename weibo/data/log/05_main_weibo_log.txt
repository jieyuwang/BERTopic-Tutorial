============================================================
微博主题建模工具
============================================================
开始时间: 2025-06-29 17:32:46

=== 加载数据 ===
成功加载嵌入向量，形状: (86816, 384)
成功加载原始文本数据，数量: 86,816
使用原始文本进行BERTopic训练（推荐）

=== 创建BERTopic模型 ===
BERTopic模型配置完成
使用改进的中文分词器和参数配置

=== 开始训练模型 ===
数据规模: 86,816 个文档
嵌入向量维度: 384
初始内存使用: 582.4 MB
开始训练BERTopic模型...
注意：训练过程可能需要几分钟，请耐心等待...
训练阶段:
1. 降维 (UMAP)
2. 聚类 (HDBSCAN)
3. 主题表示 (TF-IDF)
4. 主题概率计算
--------------------------------------------------
阶段1: 开始降维 (UMAP)...
数据量较大(86,816)，先使用前10,000个样本进行测试...
使用 10,000 个样本进行训练
✓ 阶段1完成，用时: 29.3秒
✓ 当前内存使用: 857.6 MB
✓ 训练完成！
✓ 总训练用时: 0.5 分钟
✓ 发现主题数量: 38

使用完整数据集重新训练...
完整数据: 86,816 个样本
✓ 完整数据训练完成，用时: 25.9 分钟
✓ 最终主题数量: 353

=== 主题分析 ===
主题统计信息:
   Topic  ...                                Representative_Docs
0     -1  ...  [【，请远离所有河道山洪沟道！】记者从北京市水务局了解到，7月29日8时至7月31日6时，全...
1      0  ...  [转发：本人无偿提供多台前四后八大车多台50铲车 多台300以上勾机 有需要的联系哪里需要去...
2      1  ...  [【闻汛而动 逆流救援西安高新区紧急驰援河北涿州抗洪抢险】连日来，河北省涿州市持续遭遇强降雨...
3      2  ...                                 [upup, upup, upup]
4      3  ...  [要是是我有着一段经历我可以写800篇作文了！, 河北涞水野三坡需要紧急救援，断水断电断网已...
5      4  ...  [【 孩子仅6岁】7月30日20时许，房山蓝天救援队接到窦店镇白草洼村一女子求助称，家里积水...
6      5  ...  [请省外的朋友帮我转发，我们现在缺工具 我们是河北涿州，这里洪水非常严重，受灾群众断网求救信...
7      6  ...  [说了半天拒马河最后来句 据南方周末报道，涿州市应急管理局一位工作人员表示，上游泄洪是导致3...
8      7  ...  [IP地址真的是个好东西, Ip正确, 各位涿州的家人 江苏盐城蓝天救援队来了，需要帮助的村...
9      8  ...  [【】 记者从河北省防汛抗旱指挥部获悉：受冷暖空气和台风杜苏芮共同影响，自7月27日，河北省...

[10 rows x 5 columns]

主题分布:
异常值主题: 28,556 个文档
主题 0: 5,114 个文档 -   up, up  , up, upup  ,   upup
主题 1: 3,776 个文档 -   817, 817, 817  ,   o,   8
主题 2: 1,641 个文档 -   upup, upup, upup  ,   15127499580, 15127499580  
主题 3: 1,226 个文档 - 08  ,   08, 15127499580  , 08,   15127499580
主题 4: 1,008 个文档 - 85804l  ,   85804l, 85804l, 85l1  , 85l1
主题 5: 973 个文档 - 3232503520  , 3232503520,   3232503520,   lknews, lknews
主题 6: 834 个文档 - dddd, dddd  ,   dddd,   28, 28
主题 7: 793 个文档 -   15803129958, 15803129958, 15803129958  , 16619995053  , 13720000230
主题 8: 754 个文档 -   7312, 7312, 7312  , 41960  ,   41960

=== 保存结果 ===
主题建模结果已保存到: data/topic_modeling_results.csv
主题信息已保存到: data/topic_info.csv
模型已保存到: data/bertopic_model

=== 创建可视化图表 ===
主题分布图已保存到: results/topic_distribution.png
主题层次图已保存到: results/topic_hierarchy.html
主题相似度图已保存到: results/topic_similarity.html
主题可视化图已保存到: results/topic_visualization.html

=== 生成分析报告 ===
分析报告已保存到: results/topic_analysis_report.txt

微博主题建模分析报告
==================================================

数据概览:
- 总文档数: 86,816
- 有效主题数: 352
- 异常值文档数: 28,556 (32.9%)
- 平均主题概率: 0.352
- 主题概率范围: 0.000 - 1.000

主题详情:

主题 0: 0_  up_up  _up_upup  
- 文档数: 5,114 (5.9%)
- 关键词:   up, up  , up, upup  ,   upup, upup, 16619995053, 15230200924,   15230200924, 18518593680

主题 1: 1_  817_817_817  _  o
- 文档数: 3,776 (4.3%)
- 关键词:   817, 817, 817  ,   o,   8, 8, 8  ,   81989105, 81989105  , 81989105

主题 2: 2_  upup_upup_upup  _  15127499580
- 文档数: 1,641 (1.9%)
- 关键词:   upup, upup, upup  ,   15127499580, 15127499580  , 15127499580, up  ,   up, up,   833

主题 3: 3_08  _  08_15127499580  _08
- 文档数: 1,226 (1.4%)
- 关键词: 08  ,   08, 15127499580  , 08,   15127499580, 15127499580,   tm, tm  , tm, 5018231207555  

主题 4: 4_85804l  _  85804l_85804l_85l1  
- 文档数: 1,008 (1.2%)
- 关键词: 85804l  ,   85804l, 85804l, 85l1  , 85l1,   85l1, the, the  ,   the,   3

主题 5: 5_3232503520  _3232503520_  3232503520_  lknews
- 文档数: 973 (1.1%)
- 关键词: 3232503520  , 3232503520,   3232503520,   lknews, lknews, lknews  , 731917  ,   731917, 731917, 109

主题 6: 6_dddd_dddd  _  dddd_  28
- 文档数: 834 (1.0%)
- 关键词: dddd, dddd  ,   dddd,   28, 28, 28  , 73129  , 73129, 59, 59  

主题 7: 7_  15803129958_15803129958_15803129958  _16619995053  
- 文档数: 793 (0.9%)
- 关键词:   15803129958, 15803129958, 15803129958  , 16619995053  , 13720000230, 15230200924  ,   18518593680,   16619995053, 15230200924,   15230200924

主题 8: 8_  7312_7312_7312  _41960  
- 文档数: 754 (0.9%)
- 关键词:   7312, 7312, 7312  , 41960  ,   41960, 41960,   30, 30, 30  ,   psl


结束时间: 2025-06-29 17:59:36
============================================================
主题建模完成！
============================================================

输出文件:
1. data/topic_modeling_results.csv - 主题建模结果
2. data/topic_info.csv - 主题信息
3. data/bertopic_model - 训练好的模型
4. results/ - 可视化图表和分析报告

下一步: 运行 6_evaluation_metrics.py 进行模型评估
