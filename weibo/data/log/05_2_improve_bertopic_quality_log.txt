日志文件: data/log/05_2_improve_bertopic_quality_log.txt
开始时间: 2025-06-29 18:51:53
============================================================
============================================================
改进版BERTopic主题建模工具（强力文本清洗）
============================================================
开始时间: 2025-06-29 18:51:53

=== 加载和预处理数据 ===
嵌入向量形状: (86816, 384)
原始文本数量: 86,816
预处理文本...
预处理后文本数量: 65,399
过滤后嵌入向量形状: (65399, 384)

预处理示例:
原文1: 【杜苏芮将于28日在福建福清到广东惠来一带沿海登陆】 国家防总办公室应急管理部26日组织防汛防台风专...
处理后: 【杜苏芮将于28日在福建福清到广东惠来一带沿海登陆】国家防总办公室应急管理部26日组织防汛防台风专题...

原文2: 【国家防总提升防汛防台风应急响应至三级】今年第5号台风杜苏芮逐渐向闽粤沿海靠近。记者26日从应急管理...
处理后: 【国家防总提升防汛防台风应急响应至三级】今年第5号台风杜苏芮逐渐向闽粤沿海靠近。记者26日从应急管理...

原文3: 【】 7月26日，国家防总办公室应急管理部组织防汛防台风专题视频会商调度，与中国气象局水利部自然资源...
处理后: 【】7月26日，国家防总办公室应急管理部组织防汛防台风专题视频会商调度，与中国气象局水利部自然资源部...


=== 创建高质量BERTopic模型 ===
✓ 改进版BERTopic模型配置完成
✓ 使用强力文本清洗和过滤策略
✓ 限制主题数量为20个，改善可视化效果

先使用前15,000个样本进行测试...

=== 训练改进版模型 ===
使用前 15,000 个样本进行训练
训练数据规模: 15,000 个文档
嵌入向量维度: 384
开始训练...
✓ 训练完成！
✓ 训练用时: 0.5 分钟
✓ 发现主题数量: 10

=== 改进版结果分析 ===
主题统计信息:
   Topic  ...                                Representative_Docs
0     -1  ...  [北京门头沟洪水来袭，有人浑水摸了一条大鱼。2北京永定河, 黑龙江省气象台2023年8月2日...
1      0  ...  [10岁女童在门头沟被水冲走，请有知情人速与家长联系。, 东城坊镇贾村162号，187322...
2      1  ...  [【8月1日完整版】受台风杜苏芮影响，京津冀地区遭遇极端罕见强降雨。如今三天时间过去，降雨虽...
3      2  ...  [暴雨过后两只鸡站在木头上，在洪水中漂流！网友我要是能救到它俩，我就养着，死了也不吃，给它俩...
4      3  ...  [【暴雨来了怎么办？】中国气象规定，24小时降水量为50毫米或以上的雨称为暴雨。在山区，暴雨...
5      4  ...  [我人在外地，涿州家中有老人孩子被洪水困住，村里已经彻底没有信号，水位还在上涨，急需解救，位...
6      5  ...  [【】据消息，受台风影响，京津冀地区持续强降雨，导致北京丰台至沙城铁路（丰沙线）严重水害，为...
7      6  ...  [最近几天北京一直下雨，房山门头沟昌平依次爆出暴雨洪水严重的消息，看着视频中无情的洪水无奈的...
8      7  ...  [希望在今天帮助过别人的好人都能平安2北京北遇映画, 在这轮降雨中，石家庄石太铁路线秀林段，...
9      8  ...  [【，其中2人在抢险救灾中因公殉职】记者从市防汛抗旱指挥部获悉：受台风杜苏芮影响，北京自7月...

[10 rows x 5 columns]

主题分布 (前15个):
异常值主题: 6,494 个文档
主题 0: 522 个文档 - 8118111aaaaa73072918d, 600ld, 731108113126652826ld, 812473181ld, 3l, 3ld, 13290546777d, 8128d, 72988111355143573008110133913ld, 73181old
主题 1: 160 个文档 - 73181od, 81800d, 731813122525251782731731od, 2023731731721400721od, 8112141450ld, 281g6330232223ld, 812473181ld, 3ld, 1953830731700607315103160401711060d, 20177311712old
主题 2: 283 个文档 - 7312202ld, 30l, 281202300ld, 199212731114912471od, 812260ld, 199212731114912471d, 731ld, 81300ld, ld, 73181884303810615app2015lvnewsd
主题 3: 216 个文档 - ld, 12, 731108113126652826ld, 8121110722000ld, 81300ld, tm, 81903ld, 8130060081ld, 21d, 731lld
主题 4: 355 个文档 - 73122ld, 731ld, k396z1801218706813ld, 199212, 731117l, 49813117243049811234d, 731108113126652826ld, 292031131769322158093111ld, ld, 730labd
主题 5: 176 个文档 - 5729101002213729d, 202372917307298130023120d, 72917307298147298177297308134678173081250600121956815612202002427d, 2822239ld, 3111311214, 73110, ip, 72929203122236322343923435569063110111118201272137507307311998700viad, 7292ld, 107107
主题 6: 1,596 个文档 - 7298130023120d, ld, 300292031131769346832215809ld, 731l, 303467120150200300508025729093006228d, 813132020ld, 7298130231209121101193456789d, 73110810810015025070120150d, 30ld, 72981
主题 7: 1,841 个文档 - ld, 3111311214ld, 731ld, 3111311214, 2, 730ld, 731l, ild, 730labd, 72929203122236322343923435569063110111118201272137507307311998700d
主题 8: 3,357 个文档 - ld, 731l, 2023731312215cm40cm651583123d, 731ld, 731917ld, 730ld, 300292031131769346832215809ld, 2370050ld, 30l, 2920311317693221580931115000d

异常值统计:
  异常值数量: 6,494
  异常值比例: 43.3%

=== 保存改进版结果 ===
✓ 创建输出目录: results/high_quality_results
✓ 主题建模结果已保存到: results/high_quality_results/topic_modeling_results_high_quality.csv
✓ 主题信息已保存到: results/high_quality_results/topic_info_high_quality.csv
✓ BERTopic模型已保存到: results/high_quality_results/bertopic_model_high_quality

=== 创建可视化图表 ===
创建主题分布图...
✓ 主题分布图已保存到: results/high_quality_results/visualizations/topic_distribution.png
创建主题关键词热力图...
✓ 主题关键词热力图已保存到: results/high_quality_results/visualizations/topic_keywords_heatmap.png
创建文档分布饼图...
✓ 文档分布饼图已保存到: results/high_quality_results/visualizations/document_distribution.png
创建主题概率分布图...
✓ 主题概率分布图已保存到: results/high_quality_results/visualizations/topic_probability_distribution.png

=== 生成改进版分析报告 ===
✓ 改进版分析报告已保存到: results/high_quality_results/visualizations/improved_topic_analysis_report.txt

改进版微博主题建模分析报告
==================================================

数据概览:
- 总文档数: 15,000
- 有效主题数: 9
- 异常值文档数: 6,494 (43.3%)
- 平均主题概率: 0.393
- 主题概率范围: 0.001 - 1.000

主题详情:

主题 0: 0_8118111aaaaa73072918d_600ld_731108113126652826ld_812473181ld
- 文档数: 522 (3.5%)
- 关键词: 8118111aaaaa73072918d, 600ld, 731108113126652826ld, 812473181ld, 3l, 3ld, 13290546777d, 8128d, 72988111355143573008110133913ld, 73181old, 812210932666, 7313lvia, 81od, 81307312012ld, 28601823249862918960659316d

主题 1: 1_73181od_81800d_731813122525251782731731od_2023731731721400721od
- 文档数: 160 (1.1%)
- 关键词: 73181od, 81800d, 731813122525251782731731od, 2023731731721400721od, 8112141450ld, 281g6330232223ld, 812473181ld, 3ld, 1953830731700607315103160401711060d, 20177311712old, 282d, 2210932666od, 1071, 1, 730d

主题 2: 2_7312202ld_30l_281202300ld_199212731114912471od
- 文档数: 283 (1.9%)
- 关键词: 7312202ld, 30l, 281202300ld, 199212731114912471od, 812260ld, 199212731114912471d, 731ld, 81300ld, ld, 73181884303810615app2015lvnewsd, 731l, 73122ld, 7311149312151247151822199212200912ld, 1383172908811135514357300767868310288118811013391314622538731179726ld, 1383172908811135514357300767868310288118811013391314622538731179726o355113ld

主题 3: 3_ld_12_731108113126652826ld_8121110722000ld
- 文档数: 216 (1.4%)
- 关键词: ld, 12, 731108113126652826ld, 8121110722000ld, 81300ld, tm, 81903ld, 8130060081ld, 21d, 731lld, 7316124ld, 811110722000450ld, 20233202322023811od, 107viaod, 727811287540703945624d

主题 4: 4_73122ld_731ld_k396z1801218706813ld_199212
- 文档数: 355 (2.4%)
- 关键词: 73122ld, 731ld, k396z1801218706813ld, 199212, 731117l, 49813117243049811234d, 731108113126652826ld, 292031131769322158093111ld, ld, 730labd, 731220ld, 1383172908811135514357300767868310288118811013391314622538731179726o355113ld, 731d, 11720237311177311453ld, 731917ld

主题 5: 5_5729101002213729d_202372917307298130023120d_72917307298147298177297308134678173081250600121956815612202002427d_2822239ld
- 文档数: 176 (1.2%)
- 关键词: 5729101002213729d, 202372917307298130023120d, 72917307298147298177297308134678173081250600121956815612202002427d, 2822239ld, 3111311214, 73110, ip, 72929203122236322343923435569063110111118201272137507307311998700viad, 7292ld, 107107, 81731884303810615d, 73133181190081426d, 816112274, 140731820764041o140ld, ld

主题 6: 6_7298130023120d_ld_300292031131769346832215809ld_731l
- 文档数: 1,596 (10.6%)
- 关键词: 7298130023120d, ld, 300292031131769346832215809ld, 731l, 303467120150200300508025729093006228d, 813132020ld, 7298130231209121101193456789d, 73110810810015025070120150d, 30ld, 72981, 7319101177311453117ld, 30107302918ld, 72929203122236322343923435569063110111118201272137507307311998700d, 114572981300831081130d, 972917301972981300231209121101193456789d

主题 7: 7_ld_3111311214ld_731ld_3111311214
- 文档数: 1,841 (12.3%)
- 关键词: ld, 3111311214ld, 731ld, 3111311214, 2, 730ld, 731l, ild, 730labd, 72929203122236322343923435569063110111118201272137507307311998700d, 70300144ld, 721, 30ld, 7319101177311453117ld, 40

主题 8: 8_ld_731l_2023731312215cm40cm651583123d_731ld
- 文档数: 3,357 (22.4%)
- 关键词: ld, 731l, 2023731312215cm40cm651583123d, 731ld, 731917ld, 730ld, 300292031131769346832215809ld, 2370050ld, 30l, 2920311317693221580931115000d, 3111311214ld, 81300ld, 813132020ld, 72929203122236322343923435569063110111118201272137507307311998700d, 3111311214

改进说明:
- 强力文本清洗：移除所有英文单词、数字、方括号内容
- 扩展停用词：过滤更多无意义的中文词汇
- 严格分词过滤：只保留有意义的中文词汇
- 优化参数配置：提高最小文档频率，减少词汇表大小
- 增强聚类参数：提高最小主题大小，获得更稳定的主题

可视化文件:
1. results/high_quality_results/visualizations/topic_distribution.png - 主题分布图
2. results/high_quality_results/visualizations/topic_keywords_heatmap.png - 主题关键词热力图
3. results/high_quality_results/visualizations/document_distribution.png - 文档分布饼图
4. results/high_quality_results/visualizations/topic_probability_distribution.png - 主题概率分布图


结束时间: 2025-06-29 18:52:59
============================================================
改进版BERTopic主题建模完成！
============================================================

输出文件:
1. results/high_quality_results/topic_modeling_results_high_quality.csv - 改进版主题建模结果
2. results/high_quality_results/topic_info_high_quality.csv - 改进版主题信息
3. results/high_quality_results/bertopic_model_high_quality - 改进版模型
4. results/high_quality_results/visualizations/improved_topic_analysis_report.txt - 改进版分析报告
5. results/high_quality_results/visualizations/topic_distribution.png - 主题分布图
6. results/high_quality_results/visualizations/topic_keywords_heatmap.png - 主题关键词热力图
7. results/high_quality_results/visualizations/document_distribution.png - 文档分布饼图
8. results/high_quality_results/visualizations/topic_probability_distribution.png - 主题概率分布图

日志文件: data/log/05_2_improve_bertopic_quality_log.txt
============================================================
改进版BERTopic主题建模完成！
============================================================
